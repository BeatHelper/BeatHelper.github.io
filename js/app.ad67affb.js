(function(e){function t(t){for(var r,o,i=t[0],u=t[1],l=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==s[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"42b0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("div",{staticClass:"pt-5 text-center"},[n("img",{staticClass:"d-block mx-auto mb-4",attrs:{src:"bs-icon.png",alt:"",width:"72",height:"72"}}),n("h2",[e._v("Beat Helper")]),n("p",{staticClass:"lead"},[e._v(" Enter your "),n("a",{attrs:{href:"https://scoresaber.com/global",target:"_blank"}},[e._v("Score Saber")]),e._v(" link to get recomendations ")]),n("Search",{attrs:{"is-loading":e.loading},on:{search:e.request}})],1),n("div",{staticClass:"pt-3 text-center"},[n("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.error_msg))])],1),e.loading&&e.long_loading?n("div",{staticClass:"pt-3 text-center"},[n("p",{staticClass:"lead"},[e._v("Please wait. Making a playlist can take up to a minute...")])]):e._e(),e.songs.length?n("div",{staticClass:"pt-3"},[n("b-row",[n("b-col",{staticClass:"text-center"},[n("p",{staticClass:"lead"},[e._v(" Found "+e._s(e.maybePluralize(e.songs.length,"song"))+" for "),n("b-link",{attrs:{href:"https://scoresaber.com/u/"+e.user_id,target:"_blank"}},[e._v(e._s(e.user_name))]),e._v(". Check songs you want and download playlist. ")],1)]),n("b-col",{staticClass:"text-right",attrs:{sm:"2"}},[n("Download",{attrs:{songs:e.songs}})],1)],1),n("SongTable",{attrs:{songs:e.songs}})],1):e._e(),n("TimeFooter")],1)},a=[],o=(n("99af"),n("b0c0"),n("d3b7"),n("96cf"),n("1da1")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{on:{submit:e.onSubmit}},[n("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Link"}},[n("b-form-input",{attrs:{id:"input-none",state:e.isValid,disabled:e.isLoading,placeholder:"Example: https://scoresaber.com/u/76561198078246774"},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}}),n("b-input-group-append",[n("b-button",{attrs:{type:"submit",variant:e.isLoading?"":"primary"}},[e.isLoading?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" "+e._s(e.isLoading?"Loading...":"Recommend")+" ")],1)],1)],1)],1)},u=[],l=(n("caad"),n("a9e3"),n("ac1f"),n("2532"),n("1276"),{name:"Search",props:{isLoading:Boolean},data:function(){return{user_id:""}},methods:{onSubmit:function(e){e.preventDefault(),this.isValid&&this.$emit("search",this.parsedUserId)}},computed:{isValid:function(){return this.user_id.length<1?null:!!this.user_id.includes("scoresaber.com")&&!isNaN(Number(this.parsedUserId))},parsedUserId:function(){return this.user_id.split("/").pop().split("&")[0].split("?")[0]}}}),c=l,p=n("2877"),d=Object(p["a"])(c,i,u,!1,null,null,null),f=d.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-table",{staticClass:"pt-3",attrs:{responsive:"",striped:"",items:e.songs,fields:e.fields},scopedSlots:e._u([{key:"cell(use)",fn:function(t){return[n("b-form-checkbox",{attrs:{size:"lg"},model:{value:t.item.use,callback:function(n){e.$set(t.item,"use",n)},expression:"data.item.use"}})]}},{key:"cell(hash)",fn:function(e){return[n("b-img-lazy",{attrs:{src:"https://scoresaber.com/imports/images/songs/"+e.item.hash+".png",rounded:"",width:"48",height:"48"}})]}},{key:"cell(song_name)",fn:function(t){return[n("b-link",{attrs:{target:"_blank",href:"https://beatsaver.com/beatmap/"+t.item.key}},[e._v(e._s(t.item.song_name))])]}},{key:"cell(accuracy)",fn:function(t){return[e._v(e._s(t.item.accuracy.toFixed(2))+"%")]}},{key:"cell(score_add)",fn:function(t){return[e._v(" "+e._s(t.item.score.toFixed(2))+"pp "),n("sup",{staticClass:"text-success"},[e._v("+"+e._s(t.item.score_add.toFixed(2))+"pp")])]}}])})},m=[],g={name:"SongTable",props:{songs:Array},data:function(){return{fields:[{key:"use",label:""},{key:"hash",label:""},{key:"song_name",label:"Song",sortable:!0},{key:"accuracy",label:"Target accuracy",sortable:!0},{key:"score_add",label:"Score",sortable:!0}]}}},b=g,_=(n("a75b"),Object(p["a"])(b,h,m,!1,null,null,null)),v=_.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"my-5 pt-5 text-muted text-center text-small"},[e.time_string.length>0?n("p",{staticClass:"mb-1"},[e._v("Last database update was "+e._s(e.time_string))]):e._e(),n("p",{staticClass:"mb-1"},[e._v("Â© 2020 Norne")])])},x=[];function k(){return w.apply(this,arguments)}function w(){return w=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://cryptic-gorge-60885.herokuapp.com/player/update");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n.last_update);case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",1586522756.7299583);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),w.apply(this,arguments)}var C={name:"TimeFooter",data:function(){return{time_string:""}},mounted:function(){var e=this;k().then((function(t){var n=new Date;n.setTime(1e3*t),e.time_string=n.toLocaleString()}))}},O=C,S=Object(p["a"])(O,y,x,!1,null,null,null),j=S.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{attrs:{disabled:!e.loaded,variant:"success"},on:{click:e.download_playlist}},[e._v("Download")])},P=[];n("4160"),n("159b");function R(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function E(){return L.apply(this,arguments)}function L(){return L=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/b64image.txt");case 3:return t=e.sent,e.next=6,t.text();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return","");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),L.apply(this,arguments)}var $={name:"Download",props:{songs:Array},data:function(){return{b64image:"",loaded:!1}},methods:{download_playlist:function(){var e={playlistTitle:"Top PP songs",playlistAuthor:"Norne",image:this.b64image,songs:[]};this.songs.forEach((function(t){t.use&&e.songs.push({key:t.key,hash:t.hash,songName:t.song_name,uploader:t.uploader})})),R("top.bplist",JSON.stringify(e))}},mounted:function(){var e=this;E().then((function(t){e.b64image=t,e.loaded=!0}))}},F=$,N=Object(p["a"])(F,T,P,!1,null,null,null),D=N.exports;function M(e){return A.apply(this,arguments)}function A(){return A=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://cryptic-gorge-60885.herokuapp.com/player/".concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",{status:"error",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),A.apply(this,arguments)}var z={name:"Main",components:{Search:f,SongTable:v,TimeFooter:j,Download:D},data:function(){return{user_id:"",user_name:"",loading:!1,long_loading:!1,error_msg:"",error:!1,songs:[]}},methods:{request:function(e){var t=this;this.songs=[],this.user_id=e,this.error=!1,this.loading=!0,this.long_loading=!1,M(this.user_id).then((function(e){return t.onResponce(e)})),setTimeout((function(){return t.long_loading=!0}),4e3)},onResponce:function(e){if(this.loading=!1,this.long_loading=!1,"error"===e.status)this.error=!0,this.error_msg=e.error;else{this.user_name=e.name;for(var t=0;t<e.songs.length;++t)e.songs[t].use=!0,e.songs[t].score_add=e.songs[t].score-e.songs[t].your_score;this.songs=e.songs}},maybePluralize:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"s";return"".concat(e," ").concat(t).concat(1!==e?n:"")}}},I=z,U=Object(p["a"])(I,s,a,!1,null,null,null),J=U.exports,V=n("5f5b"),q=n("b1e0");n("f9e3"),n("2dd8");r["default"].config.productionTip=!1,r["default"].use(V["a"]),r["default"].use(q["a"]),new r["default"]({render:function(e){return e(J)}}).$mount("#app")},a75b:function(e,t,n){"use strict";var r=n("42b0"),s=n.n(r);s.a}});
//# sourceMappingURL=app.ad67affb.js.map